<div class=" content">
  <div class=" row">
    <div class="col-md-12">
      <h1 class="text-center">Dividends</h1>
        <p-table #dt1 [value]="dividends" dataKey="id"
        [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]" [loading]="dividendsLoading" styleClass="p-datatable-gridlines"
        [paginator]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [globalFilterFields]="['symbol']" responsiveLayout="scroll">
        <ng-template pTemplate="caption">
            <div class="d-flex justify-content-between">
                <button pButton label="Clear" class="p-button-outlined" icon="pi pi-filter-slash" (click)="clear(dt1)"></button>
                <p-dropdown #dividendsRange
                            [options]="ranges"
                            optionLabel="label"
                            optionValue="value"
                            (onChange)="getDividends(dividendsRange.value, dividendsCalendar.value, selectedDividendsLast)"
                            [virtualScroll]="true">
                </p-dropdown>
                <p-dropdown #dividendsCalendar
                            [options]="calendarOptions"
                            optionLabel="label"
                            optionValue="value"
                            (onChange)="getDividends(dividendsRange.value, dividendsCalendar.value, selectedDividendsLast)"
                            >
                </p-dropdown>
                <span class="p-input-icon-left ml-auto">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" (input)="dt1.filterGlobal($event.target.value, 'contains')" placeholder="Search symbol" />
                </span>
            </div>
          <h6 class="mt-4">Please use <i class="pi pi-filter"></i> for advanced search</h6>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>
                    <div class="flex justify-content-center">
                        Symbol
                        <p-columnFilter type="text" field="symbol" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Ex Date
                        <p-columnFilter type="date" field="exDate" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Record Date
                        <p-columnFilter type="date" field="recordDate" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Payment Date
                        <p-columnFilter type="date" field="paymentDate" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        From Factor
                        <p-columnFilter type="numeric" field="fromFactor" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        To Factor
                        <p-columnFilter type="numeric" field="toFactor" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Description
                        <p-columnFilter type="text" field="description" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Ratio
                        <p-columnFilter type="numeric" field="ratio" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Notes
                        <p-columnFilter type="text" field="notes" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Min Price
                        <p-columnFilter type="numeric" field="minPrice" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Max Price
                        <p-columnFilter type="numeric" field="maxPrice" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Flag
                        <p-columnFilter type="text" field="flag" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Security Type
                        <p-columnFilter type="text" field="securityType" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Figi
                        <p-columnFilter type="text" field="figi" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Last Updated
                        <p-columnFilter type="date" field="lastUpdated" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Country Code
                        <p-columnFilter type="text" field="countryCode" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Par Value
                        <p-columnFilter type="numeric" field="parValue" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Par Value Currency
                        <p-columnFilter type="text" field="parValueCurrency" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Ref Id
                        <p-columnFilter type="numeric" field="refid" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Created
                        <p-columnFilter type="date" field="created" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Id
                        <p-columnFilter type="text" field="id" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Source
                        <p-columnFilter type="text" field="source" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Key
                        <p-columnFilter type="text" field="key" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Date
                        <p-columnFilter type="date" field="date" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Updated
                        <p-columnFilter type="date" field="updated" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Withdrawal From Date
                        <p-columnFilter type="date" field="withdrawalFromDate" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Withdrawal To Date
                        <p-columnFilter type="date" field="withdrawalToDate" display="menu"></p-columnFilter>
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-center">
                        Election Date
                        <p-columnFilter type="date" field="electionDate" display="menu"></p-columnFilter>
                    </div>
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-collection>
            <tr>
                <td>
                    {{collection.symbol}}
                </td>
                <td>
                    {{collection.exDate | date: 'MM/dd/yyyy'}}
                </td>
                <td>
                    {{collection.recordDate | date: 'MM/dd/yyyy'}}
                </td>
                <td>
                    {{collection.paymentDate | date: 'MM/dd/yyyy'}}
                </td>
                <td>
                    {{collection.fromFactor}}
                </td>
                <td>
                    {{collection.toFactor}}
                </td>
                <td>
                    <span>{{!collection.more?collection.description.slice(0,20):collection.description}}</span>
                    <button class="more" (click)="switchNote(collection.id)">{{!collection.more?'more':'less'}}</button>
                </td>
                <td>
                    {{collection.ratio}}
                </td>
                <td>
                    <span>{{!collection.more?collection.notes.slice(0,30):collection.notes}}</span>
                    <button class="more" (click)="switchNote(collection.id)">{{!collection.more?'more':'less'}}</button>
                </td>
                <td>
                    {{collection.minPrice}}
                </td>
                <td>
                    {{collection.maxPrice}}
                </td>
                <td>
                    {{collection.flag}}
                </td>
                <td>
                    {{collection.securityType}}
                </td>
                <td>
                    {{collection.figi}}
                </td>
                <td>
                    {{collection.lastUpdated | date: 'MM/dd/yyyy'}}
                </td>
                <td>
                    {{collection.countryCode}}
                </td>
                <td>
                    {{collection.parValue}}
                </td>
                <td>
                    {{collection.parValueCurrency}}
                </td>
                <td>
                    {{collection.refid}}
                </td>
                <td>
                    {{collection.created | date: 'MM/dd/yyyy'}}
                </td>
                <td>
                    {{collection.id}}
                </td>
                <td>
                    {{collection.source}}
                </td>
                <td>
                    {{collection.key}}
                </td>
                <td>
                    {{collection.date | date: 'MM/dd/yyyy'}}`
                </td>
                <td>
                    {{collection.updated | date: 'MM/dd/yyyy'}}
                </td>
                <td>
                    {{collection.withdrawalFromDate | date: 'MM/dd/yyyy'}}
                </td>
                <td>
                    {{collection.withdrawalToDate | date: 'MM/dd/yyyy'}}
                </td>
                <td>
                    {{collection.electionDate | date: 'MM/dd/yyyy'}}
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="28">No collections found.</td>
            </tr>
        </ng-template>
    </p-table>
    </div>
  </div>
</div>
